@startuml

class FilterEngine {
    prepareToPlay(sampleRate, samplesPerBlock)
    processBlock(buffer)
}

abstract Filter {
    prepareToPlay(sampleRate, samplesPerBlock)
    processBlock(buffer, numProcessed, samplesThisTime)
    updateCoeffs() 
}

class LowPass
class HighPass
class QuadFilter {
    setCoeffs(b0, b1, b2, a1, a2)
    processSample(x)
    reset()
}
class FilterModulatorAudioProcessorEditor 
class FilterModulatorAudioProcessor

abstract Modulator {
    prepareToPlay(sampleRate, samplesPerBlock)
    getModulatedCutoff(float cutoff, int samplesPerBlock)  
    setRate(float rateHz)
}

class StepSequencer {
    prepareToPlay(sampleRate, samplesPerBlock)
    getModulatedCutoff(float cutoff, int samplesPerBlock)
    setFilter(index, cutoff)
    setNumActiveSteps(int n)
}

enum WaveType { 
    Sin
    Square
    Triangle
    Saw
}

class WaveGenerator {
    prepareToPlay(sampleRate)
    setFrequency(newFreq)
    getNextValue(samplesPerBlock)
    setWaveType(wt)
}


class Oscillator {
    prepareToPlay(sampleRate, samplesPerBlock)
    setWaveType(type)
    setDepth(semitoneDepth)
}

FilterModulatorAudioProcessorEditor o-- FilterModulatorAudioProcessor
FilterModulatorAudioProcessor "1" *-- "1" FilterEngine
Filter <|-- HighPass
Filter <|-- LowPass
FilterEngine "1" *-- "2" Filter
FilterEngine "1" *-- "2" Modulator
Filter "1" *-- "1..*" QuadFilter
Modulator <|-- StepSequencer
Modulator <|-- Oscillator
WaveGenerator *-- WaveType
Oscillator *-- WaveGenerator


@endum

